function isLoggedIn(e,t,r){return e.isAuthenticated()?r():void t.redirect("/accessdenied")}module.exports=function(e,t,r,n){e.set("views","../InfluencedRelationship"),e.get("/",function(e,t){t.render("index.ejs",{message:e.flash("loginMessage")})}),e.post("/login",t.authenticate("local-login",{successRedirect:"/dashboard",failureRedirect:"/accessdenied",failureFlash:!0})),e.get("/dashboard",isLoggedIn,function(e,t){t.render("dashboard.ejs",{user:e.user})}),e.get("/relationshiptables",isLoggedIn,function(e,t){t.render("relationshiptables.ejs",{user:e.user})}),e.get("/relationship/list",function(e,t){n.listar(e.body,function(e){t.send(e)})}),e.post("/relationship/addtelefone",function(e,t){n.addtelefone(e.body,function(e){t.send(e)})}),e.post("/relationship/addemail",function(e,t){n.addemail(e.body,function(e){t.send(e)})}),e.post("/relationship/addlotacao",function(e,t){n.addlotacao(e.body,function(e){t.send(e)})}),e.post("/relationship/addsocialnetwork",function(e,t){n.addsocialnetwork(e.body,function(e){t.send(e)})}),e.post("/relationship/addcomentario",function(e,t){n.addcomentario(e.body,function(e){t.send(e)})}),e.post("/relationship/salvar",function(e,t){n.salvar(e.body,function(e){t.json(e)})}),e.get("/signup",isLoggedIn,function(e,t){t.render("signup.ejs",{message:e.flash("signupMessage")})}),e.post("/signup",t.authenticate("local-signup",{successRedirect:"/dashboard",failureRedirect:"/signup",failureFlash:!0})),e.get("/logout",function(e,t){e.logout(),t.redirect("/")}),e.get("/accessdenied",function(e,t){t.render("accessdenied.ejs")}),e.get("/ping",function(e,t){t.status(200).send("pong!")})};