angular.module("chatControllers",[]).controller("chatCTRL",function(e,t){e.messages=[],t.on("init",function(t){e.name=t.name,e.users=t.users,e.totalusers=t.users.length}),t.on("send:message",function(t){e.messages.push(t)}),t.on("change:name",function(e){r(e.oldName,e.newName)}),t.on("user:join",function(t){e.messages.push({user:"",text:"O usu치rio "+t.name+", entrou no Volatile."}),e.users.push(t.name),e.totalusers=e.users.length}),t.on("user:left",function(t){e.messages.push({user:"",text:"O usu치rio "+t.name+", saiu do Volatile."});var r,n;for(r=0;r<e.users.length;r++)if(n=e.users[r],n===t.name){e.users.splice(r,1),e.totalusers=e.users.length;break}});var r=function(t,r){var n;for(n=0;n<e.users.length;n++)e.users[n]===t&&(e.users[n]=r);e.messages.push({user:"",text:"O usu치rio "+t+" agora se chama "+r+"."})};e.changeName=function(){t.emit("change:name",{name:e.newName},function(t){t?(r(e.name,e.newName),e.name=e.newName,e.newName=""):alert("O nickname est치 em uso, escolha outro.")})},e.sendMessage=function(){t.emit("send:message",{message:e.message}),e.messages.push({user:e.name,text:e.message}),e.message=""}});