angular.module("relationshipController",[]).controller("relationshipCTRL",function(e,t,r){e.formData={},e.predicate="nome",e.status={estado:"escolha o Estado",cidade:"escolha a Cidade"},e.arrayscidades=[],e.tiposemail=[{descricao:"Pessoal"},{descricao:"Trabalho"},{descricao:"iCloud"},{descricao:"outros"}],e.tipostelefone=[{descricao:"iPhone"},{descricao:"celular"},{descricao:"Trabalho"},{descricao:"Residencial"},{descricao:"Fax"},{descricao:"outros"}],e.tipossocialnetwork=[{descricao:"twitter"},{descricao:"facebook"},{descricao:"instagram"}],e.emailtipo="Pessoal",e.ifEmail="",e.telefonetipo="iPhone",e.ifTelefone="",e.socialnetworktipo="twitter",e.ifLink="",e.ifData="",e.ifLotacao="",e.ifComentario="",e.cor={nivel01:"btn-danger",nivel02:"btn-warning",nivel03:"btn-success",nivel04:"btn-info",nivel05:"btn-primary"},e.alterar=function(t){switch(console.log(t),t){case"RED":e.cor={nivel01:"btn-danger",nivel02:"btn-default",nivel03:"btn-default",nivel04:"btn-default",nivel05:"btn-default"};break;case"ORANGE":e.cor={nivel01:"btn-warning",nivel02:"btn-warning",nivel03:"btn-default",nivel04:"btn-default",nivel05:"btn-default"};break;case"GREEN":e.cor={nivel01:"btn-success",nivel02:"btn-success",nivel03:"btn-success",nivel04:"btn-default",nivel05:"btn-default"};break;case"CYAN":e.cor={nivel01:"btn-info",nivel02:"btn-info",nivel03:"btn-info",nivel04:"btn-info",nivel05:"btn-default"};break;case"BLUE":e.cor={nivel01:"btn-primary",nivel02:"btn-primary",nivel03:"btn-primary",nivel04:"btn-primary",nivel05:"btn-primary"};break;default:e.cor={nivel01:"btn-danger",nivel02:"btn-warning",nivel03:"btn-success",nivel04:"btn-info",nivel05:"btn-primary"}}},e.novo=function(){e.formData={},e.formData.situacao="NOVO",e.alterar("NOVO"),console.log(e.formData.situacao),console.log(e.cor)},r.list().success(function(t){e.collections=t}),e.salvar=function(){$.isEmptyObject(e.formData)||r.salvar(e.formData).success(function(t){e.pesquisa(t,function(r){-1==r?(console.log(t),console.log(r),e.collections.push(t)):(console.log(r),e.collections[r]=t)}),e.formData={}})},e.editar=function(t){console.log(t),e.formData=t,e.alterar(t.situacao)},e.erase=function(t){r.erase(t._id).success(function(r){var n=e.collections.indexOf(t);e.collections[n].forauso=!0})},e.pesquisa=function(t,r){var n=-1;for(i=0;i<e.collections.length;i++)if(e.collections[i]._id==t._id)return console.log(i),i;return console.log(n),n},e.escolhatipoemail=function(t){e.emailtipo=t},e.insertemail=function(t,n,i){r.addemail({_id:t,emails:{tipo:n,email:i,forauso:!1}}).success(function(t){e.formData.emails.push({tipo:n,email:i,forauso:!1}),delete e.ifEmail})},e.eraseemail=function(t){e.formData.emails=t.filter(function(e){return e.selecionado?void 0:e})},e.escolhatipotelefone=function(t){e.telefonetipo=t},e.inserttelefone=function(t,n,i){r.addtelefone({_id:t,telefones:{tipo:n,numero:i,forauso:!1}}).success(function(t){e.pesquisa(t,function(r){-1==r?(console.log(t),console.log(r),e.collections.push(t),delete e.ifTelefone):console.log(r)})})},e.erasetelefone=function(t){e.formData.telefones=t.filter(function(e){return e.selecionado?void 0:e})},e.insertlotacao=function(t,n,i){r.addlotacao({_id:t,lotacoes:{datalotacao:n,lotacao:i,forauso:!1}}).success(function(t){e.formData.lotacoes.push({data:t,lotacao:i,forauso:!1}),delete e.ifLotacao,delete e.ifData})},e.eraseLotacao=function(t){e.formData.lotacoes=t.filter(function(e){return e.selecionado?void 0:e})},e.escolhatiposocialnetwork=function(t){e.socialnetworktipo=t},e.insertsocialnetwork=function(t,n,i){r.addsocialnetwork({_id:t,socialnetworks:{tipo:n,link:i,forauso:!1}}).success(function(t){e.formData.socialnetworks.push({tipo:n,link:i,forauso:!1}),delete e.ifLink})},e.erasesocialnetwork=function(t){e.formData.socialnetworks=t.filter(function(e){return e.selecionado?void 0:e})},e.insertcomentario=function(t,n,i){r.addcomentario({_id:t,comentarios:{nome:n,texto:i,forauso:!1}}).success(function(t){e.formData.comentarios.push({nome:n,texto:i,forauso:!1}),delete e.ifComentario})},e.erasecomentario=function(t){e.formData.comentarios=t.filter(function(e){return e.selecionado?void 0:e})}});